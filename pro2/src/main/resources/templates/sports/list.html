<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
	.container_body {
	  display: flex;
	  gap: 30px;
	  max-width: 1200px;
	  margin: 0 auto;
	}
	
	.main-content {
	  flex: 1;
	}
	.sidebar {
	  width: 250px;
	  background: #f8f8f8;
	  padding: 15px;
	  border-radius: 8px;
	  font-family: 'Noto Sans KR', sans-serif;
	  font-size: 0.95rem;
	}

	.sidebar h3 {
	  font-size: 1.1rem;
	  margin-bottom: 10px;
	  border-bottom: 1px solid #ccc;
	  padding-bottom: 5px;
	}

	.sidebar ul {
	  list-style: none;
	  padding: 0;
	}

	.sidebar li {
	  padding: 6px 0;
	  color: #444;
	}

	/* 메인 콘텐츠 영역 */
	.main-content {
	  flex: 1;
	}

	.sports-tabs {
	  margin-bottom: 20px;
	}

	.tab-btn {
	  padding: 8px 16px;
	  border: none;
	  background-color: #eee;
	  margin-right: 10px;
	  border-radius: 5px;
	  cursor: pointer;
	}

	.tab-btn.active {
	  background-color: #1e90ff;
	  color: white;
	}
</style>
<link rel="stylesheet" th:href="@{/css/main.css}">


<div class="site-header">
	<div class="container">
  <div class="logo">로고</div>

  <div class="top-bar">
    <div class="date">2025.07.03</div>
    <div class="user-menu">
      <a th:href="${session.role == 'admin'} ? @{/report/list} : @{/report/write}">기사제보</a>
	  <span th:if="${session.sid == null}">
	      <a th:href="@{/user/login}">로그인</a>
	      <a th:href="@{/user/insert}">회원가입</a>
	  </span>
	  <span th:if="${session.sid != null and session.role == 'admin'}">
			  <a th:href="@{/user/logout}">로그아웃</a>
			  <a th:href="@{/admin/adminPage}">관리자페이지</a>
	  </span>
	  <span th:if="${session.sid != null and session.role != 'admin'}">
	  	      <a th:href="@{/user/logout}">로그아웃</a>
	  <span th:if="${session.sid != null}">
			  <a th:href="@{/user/myPage}">마이페이지</a>
	  	      <a th:href="@{/user/logout}">로그아웃</a>
	  </span>
	</div>
  </div>

  <nav class="main-nav">
    <ul>
      <li><a href="#">뉴스</a></li>
      <li><a th:href="@{/sports/list}">스포츠</a></li>
      <li><a href="#">엔터</a></li>
    </ul>
    <div class="search">
      <input type="text" placeholder="검색" />
    </div>
  </nav>

  <nav class="sub-nav">
    <ul>

		<li class="category-link" data-category="종합">종합</li>
		<li class="category-link" data-category="1">축구</li>
		<li class="category-link" data-category="2">야구</li>
		<li class="category-link" data-category="3">농구</li>
		<li class="category-link" data-category="4">배구</li>
    </ul>
  </nav>
</div>
</div>

<div class="container_body">
  <!-- 메인 콘텐츠 먼저 -->
  <main class="main-content">

    <div id="sports-content">
      <!-- AJAX로 바뀌는 기사 리스트 -->
    </div>
  </main>


</div>

<script>
	$(document).ready(function () {

	  // 1) AJAX 요청 함수 정의
	  function loadCategory(category) {
	    let url = "/sports/boardList"; // 기본 URL

	    // '종합'이면 URL 변경
	    if (category === "종합") {
	      url = "/sports/main"; 
	    }

	    // AJAX 요청
	    $.ajax({
	      url: url,
	      method: 'GET',
	      data: { category: category },
	      success: function (html) {
	        $('#sports-content').html(html);
	      },
	      error: function () {
	        alert('카테고리 기사 로딩 실패!');
	      }
	    });
	  }

	  // 2) 카테고리 클릭 이벤트 등록
	    $('.category-link').click(function () {
	      $('.category-link').removeClass('active');
	      $(this).addClass('active');

	      const category = $(this).data('category');
	      loadCategory(category);

	      // ✅ 선택한 카테고리 localStorage에 저장
	      localStorage.setItem('selectedCategory', category);
	    });

	    // 3) 페이지 로딩 시 마지막 선택 카테고리 자동 호출
	    const savedCategory = localStorage.getItem('selectedCategory') || '종합';
	    loadCategory(savedCategory);
	    $('.category-link[data-category="' + savedCategory + '"]').addClass('active');
	  });
</script>